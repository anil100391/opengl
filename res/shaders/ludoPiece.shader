// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
#shader vertex
#version 330 core

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
layout(location = 0) in vec4 position;
layout(location = 1) in vec2 texCoord;

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
uniform mat4 u_MVP;

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
void main()
{
    gl_Position = u_MVP * position;
};

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
#shader fragment
#version 330 core

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
layout(location = 0) out vec4 color;

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
uniform int u_CellType;
uniform int u_CellIndex;
uniform float u_Size;
uniform vec2 u_CellOrigin;
uniform vec4 u_Color;

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
float plot( vec2 xy )
{
    return smoothstep( 0.0, 0.10, min( fract( xy.x ), fract( xy.y ) ) );
}

// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
void main()
{
    color = vec4(u_Color);
    float radius = length( vec2( gl_FragCoord ) - (u_CellOrigin + u_Size / 2) );
    float pieceSizeRelativeToCell = 1.2;
    float fac = min( 2.0 * pieceSizeRelativeToCell * radius / length( u_Size ), 1.0 );
    if ( fac < 1.0f )
        fac = 1.0;
    else
        fac = 0.0;
    color = vec4( color.rgb * fac, fac );
    // color = vec4( vec3( fac ), 1.0 );

    /*
    vec2 coord = vec2( gl_FragCoord ) - u_CellOrigin;
    coord = coord / u_Size;
    color = (u_CellIndex / 225.0f) * color;
    */
}

